<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAOVN | Sáng Tạo Không Giới Hạn</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
</head>
<body>
    <header>
        <a href="index.html" class="logo-wrapper">
            <span class="logo-text">SAOVN</span>
            <span class="logo-slogan">Special Actions Organization for Vietnam</span>
        </a>
        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </div>
        <nav class="nav-container">
            <a href="index.html" class="nav-link active">Trang chủ</a>
            <a href="ve-saovn.html" class="nav-link">Về SAOVN</a>
            <a href="du-an.html" class="nav-link">Dự án</a>
            <a href="lien-he.html" class="nav-link">Liên hệ</a>
            <a href="register.html" class="nav-link">Đăng ký</a>
            <button class="btn-login" onclick="window.location.href='login.html'">Đăng nhập</button>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content" data-aos="fade-up">
            <h1>SÁNG TẠO <span class="highlight">KHÔNG GIỚI HẠN</span></h1>
            <p>SAOVN - Nơi những ý tưởng điên rồ nhất trở thành hiện thực.</p>
            <div class="hero-btns">
                <a href="du-an.html" class="btn-primary">Xem dự án</a>
                <a href="ve-saovn.html" class="btn-secondary">Tìm hiểu thêm</a>
            </div>
        </div>
    </section>

    <section class="stats-section">
        <div class="stats-container">
            <div class="stat-item" data-aos="zoom-in">
                <h2 class="stat-number" id="real-time-members">0</h2>
                <p class="stat-label">Thành viên</p>
            </div>
            <div class="stat-item" data-aos="zoom-in" data-aos-delay="100">
                <h2 class="stat-number" data-target="15">0</h2>
                <p class="stat-label">Dự án hoàn thành</p>
            </div>
            <div class="stat-item" data-aos="zoom-in" data-aos-delay="200">
                <h2 class="stat-number" data-target="4.9" data-is-float="true">0</h2>
                <p class="stat-label">Đánh giá trung bình</p>
            </div>
        </div>
    </section>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBa3zOMwQr-KO77c5SsXEar8ycoRkmFbLk",
            authDomain: "saovn-project.firebaseapp.com",
            projectId: "saovn-project",
            storageBucket: "saovn-project.firebasestorage.app",
            messagingSenderId: "194928117396",
            appId: "1:194928117396:web:642612a60105add5639681",
            measurementId: "G-L7Y106VT85"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        AOS.init({ duration: 1000, once: true });

        // Real-time Counter từ Firestore
        const memberElement = document.getElementById('real-time-members');
        onSnapshot(doc(db, "metadata", "users_stats"), (doc) => {
            const total = doc.data()?.totalMembers || 0;
            animateValue(memberElement, parseInt(memberElement.innerText), total, 2000);
        });

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // Các counters khác
        const animateCounters = () => {
            document.querySelectorAll('.stat-number[data-target]').forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const isFloat = counter.getAttribute('data-is-float') === 'true';
                let current = 0;
                const updateCount = () => {
                    current += target / 100;
                    if (current < target) {
                        counter.innerText = isFloat ? current.toFixed(1) : Math.ceil(current);
                        setTimeout(updateCount, 20);
                    } else { counter.innerText = target; }
                };
                updateCount();
            });
        };

        let hasAnimated = false;
        window.addEventListener('scroll', () => {
            const statsSection = document.querySelector('.stats-section');
            if(statsSection && window.scrollY > statsSection.offsetTop - 600 && !hasAnimated) {
                animateCounters();
                hasAnimated = true;
            }
        });
    </script>
</body>
</html>