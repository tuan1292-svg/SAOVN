<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAOVN | S√°ng T·∫°o Kh√¥ng Gi·ªõi H·∫°n</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
</head>
<body>
    <header>
        <a href="index.html" class="logo-wrapper">
            <span class="logo-text">SAOVN</span>
            <span class="logo-slogan">Special Actions Organization for Vietnam</span>
        </a>

        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

		<nav class="nav-container">
			<a href="index.html" class="nav-link active">Trang ch·ªß</a>
			<a href="ve-saovn.html" class="nav-link">V·ªÅ SAOVN</a>
			<a href="du-an.html" class="nav-link">D·ª± √°n</a>
			<a href="quy-tac.html" class="nav-link">Quy t·∫Øc</a>
			
			<a href="register.html" class="nav-link" id="nav-register">ƒêƒÉng k√Ω</a>
			<button class="btn-login" id="nav-login-btn" onclick="window.location.href='login.html'">ƒêƒÉng nh·∫≠p</button>
			
			<div class="user-profile" id="user-profile-box" style="display: none;">
				<div class="user-info-text">
					Ch√†o, <a href="dashboard.html" class="user-name" id="display-user-link">
						<span id="display-user-name">ƒêang t·∫£i...</span>
					</a>
				</div>
				<button class="btn-logout" id="auth-logout-btn">ƒêƒÉng xu·∫•t</button>
			</div>
		</nav>
    </header>

    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 data-aos="zoom-in">S√ÅNG T·∫†O <br> <span class="outline">KH√îNG GI·ªöI H·∫†N</span></h1>
            <p data-aos="fade-up" data-aos-delay="200">T·ªï ch·ª©c ho·∫°t ƒë·ªông ƒë·∫∑c bi·ªát v√¨ Vi·ªát Nam</p>
            <div class="scroll-down">Cu·ªôn xu·ªëng ƒë·ªÉ xem ‚Üì</div>
        </div>
    </section>

    <section class="section about-section">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">V·ªÅ <span class="highlight">SAOVN</span></h2>
            
            <div class="about-brief">
                <p class="about-intro" data-aos="fade-up" data-aos-delay="100">
                    T·ª´ nh·ªØng trƒÉn tr·ªü v·ªÅ b√£o l≈©, k·∫πt xe v√† v√≤ng l·∫∑p ngh√®o kh√≥... ch√∫ng t√¥i tin r·∫±ng ch·ªâ c√≥ <strong>H√ÄNH ƒê·ªòNG</strong> m·ªõi t·∫°o n√™n thay ƒë·ªïi th·ª±c ch·∫•t.
                </p>
                
                <p class="about-text" data-aos="fade-up" data-aos-delay="200">
                    SAOVN (Special Actions Organization for Vietnam) l√† c·ªông ƒë·ªìng t·∫≠p h·ª£p nh·ªØng con ng∆∞·ªùi s·∫µn s√†ng ƒë√≥ng g√≥p tr√≠ tu·ªá v√† th·ªùi gian ƒë·ªÉ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ x√£ h·ªôi d·ª±a tr√™n d·ªØ li·ªáu th·ª±c t·∫ø.
                </p>

                <div class="about-action" data-aos="zoom-in" data-aos-delay="300">
                    <a href="ve-saovn.html" class="btn-main">Kh√°m ph√° s·ª© m·ªánh</a>
                    <a href="register.html" class="btn-sub">Gia nh·∫≠p c·ªông ƒë·ªìng</a>
                </div>
            </div>
        </div>
    </section>

    <section class="section stats-section">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">D·ªØ Li·ªáu <span class="highlight">Th·ª±c T·∫ø</span></h2>
            
            <div class="dashboard-grid">
                <div class="dash-card" data-aos="fade-up" data-aos-delay="0">
                    <div class="card-header">
                        <span class="dot-live"></span> <span class="card-label">Th√†nh vi√™n tham gia</span>
                    </div>
                    <div class="card-body">
                        <h3 class="stat-number" id="member-count" data-target="0">0</h3>
                        <div class="mini-chart bar-chart">
                            <div class="bar-line"></div><div class="bar-line"></div>
                            <div class="bar-line"></div><div class="bar-line"></div>
                            <div class="bar-line"></div><div class="bar-line"></div>
                        </div>
                    </div>
                    <p class="card-footer">‚Üë 12% so v·ªõi th√°ng tr∆∞·ªõc</p>
                </div>

                <div class="dash-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-header">
                        <span class="status-icon">‚ö°</span> <span class="card-label">D·ª± √°n ho√†n th√†nh</span>
                    </div>
                    <div class="card-body">
                        <h3 class="stat-number" data-target="14">0</h3>
                        <div class="mini-chart circle-chart">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <path class="circle" stroke-dasharray="80, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                            </svg>
                        </div>
                    </div>
                    <p class="card-footer">ƒêang tri·ªÉn khai: 03</p>
                </div>

                <div class="dash-card highlight-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="card-header">
                        <span class="money-icon">$</span> <span class="card-label">Qu·ªπ huy ƒë·ªông (VNƒê)</span>
                    </div>
                    <div class="card-body">
                        <div class="money-wrapper">
                            <h3 class="stat-number" data-target="6.8" data-is-float="true">0</h3>
                            <span class="unit">T·ª∑+</span>
                        </div>
                        <div class="mini-chart line-chart">
                            <svg viewBox="0 0 100 30" class="trending-line">
                                <polyline fill="none" stroke="#00d2ff" stroke-width="2" points="0,25 20,20 40,22 60,10 80,15 100,5" />
                            </svg>
                        </div>
                    </div>
                    <p class="card-footer live-text">ƒêang c·∫≠p nh·∫≠t real-time...</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section projects-section">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">D·ª± √Ån <span class="highlight">Ti√™u Bi·ªÉu</span></h2>
            
            <div class="project-grid">
                <div class="project-card" data-aos="fade-right">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1547619292-8816ee7cdd50?auto=format&fit=crop&w=600&q=80" alt="H·ªá th·ªëng c·∫£nh b√°o l≈©">
                    </div>
                    <div class="card-content">
                        <span class="card-tag">Thi√™n tai</span>
                        <h3>Gi·∫£i Ph√°p B√£o L≈©</h3>
                        <p>H·ªá th·ªëng gi√°m s√°t l∆∞u l∆∞·ª£ng x·∫£ l≈© th·ªßy ƒëi·ªán v√† c·∫£nh b√°o s·ªõm d·ª±a tr√™n d·ªØ li·ªáu th·ª±c t·∫ø.</p>
                        <a href="du-an.html" class="btn-card">Xem chi ti·∫øt</a>
                    </div>
                </div>

                <div class="project-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?auto=format&fit=crop&w=800&q=80" alt="Giao th√¥ng th√¥ng minh">
                    </div>
                    <div class="card-content">
                        <span class="card-tag">Giao th√¥ng</span>
                        <h3>Gi·∫£i ph√°p √ôn t·∫Øc ƒê√¥ th·ªã</h3>
                        <p>Ph√¢n t√≠ch ƒëi·ªÉm ngh·∫Ωn v√† ƒë·ªÅ xu·∫•t ph∆∞∆°ng √°n ph√¢n lu·ªìng, quy ho·∫°ch h·∫° t·∫ßng kh·∫£ thi.</p>
                        <a href="du-an.html" class="btn-card">Xem chi ti·∫øt</a>
                    </div>
                </div>

                <div class="project-card" data-aos="fade-left" data-aos-delay="400">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?auto=format&fit=crop&w=600&q=80" alt="H·ªó tr·ª£ tho√°t ngh√®o">
                    </div>
                    <div class="card-content">
                        <span class="card-tag">An sinh</span>
                        <h3>Tho√°t ngh√®o b·ªÅn v·ªØng</h3>
                        <p>X√¢y d·ª±ng l·ªô tr√¨nh h·ªó tr·ª£ c√°c ho√†n c·∫£nh kh√≥ khƒÉn t√¨m h∆∞·ªõng ƒëi m·ªõi v√† ·ªïn ƒë·ªãnh cu·ªôc s·ªëng.</p>
                        <a href="du-an.html" class="btn-card">Xem chi ti·∫øt</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container footer-grid" data-aos="fade-up">
            <div class="footer-brand">
                <h3>SAOVN</h3>
                <p>Special Actions Organization for Vietnam</p>
                <p class="footer-slogan">S√°ng t·∫°o kh√¥ng gi·ªõi h·∫°n - N√¢ng t·∫ßm v·ªã th·∫ø Vi·ªát.</p>
            </div>

            <div class="footer-contact">
                <h4>Li√™n H·ªá</h4>
                <p>üìç ƒê·ªãa ch·ªâ: Qu·∫≠n 1, TP. H·ªì Ch√≠ Minh, Vi·ªát Nam</p>
                <p>üìû ƒêi·ªán tho·∫°i: 090 xxx xxxx</p>
                <p>‚úâÔ∏è Email: contact@saovn.org</p>
            </div>

            <div class="footer-socials">
                <h4>K·∫øt N·ªëi</h4>
                <div class="social-icons">
                    <a href="#" class="social-link">TikTok</a>
                    <a href="#" class="social-link">YouTube</a>
                    <a href="#" class="social-link">Discord</a>
                    <a href="#" class="social-link">Facebook</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p class="copyright">&copy; 2026 SAOVN. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        // Init AOS
        AOS.init({ duration: 1000, once: true });

        // Mobile Menu Toggle
        const menu = document.querySelector('#mobile-menu');
        const menuLinks = document.querySelector('.nav-container');

        menu.addEventListener('click', function() {
            menu.classList.toggle('is-active');
            menuLinks.classList.toggle('active');
        });
        
        // 1. HEADER SCROLL EFFECT
        const header = document.querySelector('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // 2. COUNTER ANIMATION LOGIC
        const stats = document.querySelectorAll('.stat-number');
        let hasAnimated = false;

        const animateCounters = () => {
            stats.forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const isFloat = counter.getAttribute('data-is-float') === 'true';
                const duration = 2000; 
                const frameRate = 20; 
                const totalFrames = duration / frameRate;
                const increment = target / totalFrames;
                
                let current = 0;

                const updateCount = () => {
                    current += increment;
                    if (current < target) {
                        counter.innerText = isFloat ? current.toFixed(1) : Math.ceil(current);
                        setTimeout(updateCount, frameRate);
                    } else {
                        counter.innerText = isFloat ? target : target;
                    }
                };
                updateCount();
            });
        };

        // K√≠ch ho·∫°t khi cu·ªôn ƒë·∫øn section Stats
        window.addEventListener('scroll', () => {
            const statsSection = document.querySelector('.stats-section');
            if(statsSection) {
                const triggerPoint = window.innerHeight * 0.8; 
                const sectionTop = statsSection.getBoundingClientRect().top;
                if (sectionTop < triggerPoint && !hasAnimated) {
                    animateCounters();
                    hasAnimated = true;
                }
            }
        });
    </script>
	<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // C·∫•u h√¨nh Firebase c·ªßa b·∫°n
    const firebaseConfig = {
        apiKey: "AIzaSyBa3zOMwQr-KO77c5SsXEar8ycoRkmFbLk",
        authDomain: "saovn-project.firebaseapp.com",
        projectId: "saovn-project",
        storageBucket: "saovn-project.firebasestorage.app",
        messagingSenderId: "194928117396",
        appId: "1:194928117396:web:642612a60105add5639681"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
	
	// --- H√ÄM L·∫§Y S·ªê TH√ÄNH VI√äN THEO C·∫§U TR√öC M·ªöI ---
async function fetchMemberStats() {
    try {
        // 1. Ch·ªânh s·ª≠a: Collection l√† "metadata", Document ID l√† "users_stats"
        const statsDocRef = doc(db, "metadata", "users_stats"); 
        const statsDocSnap = await getDoc(statsDocRef);

        if (statsDocSnap.exists()) {
            const data = statsDocSnap.data();
            
            // 2. Ch·ªânh s·ª≠a: Field b·∫°n ƒë·∫∑t t√™n l√† "totalMembers"
            const total = data.totalMembers || 0; 

            const memberElement = document.getElementById('member-count');
            if (memberElement) {
                // C·∫≠p nh·∫≠t gi√° tr·ªã ƒë√≠ch cho hi·ªáu ·ª©ng ch·∫°y s·ªë
                memberElement.setAttribute('data-target', total);
                
                // L∆∞u √Ω: N·∫øu trang web ƒë√£ cu·ªôn qua section n√†y tr∆∞·ªõc khi d·ªØ li·ªáu t·∫£i xong,
                // ta n√™n c·∫≠p nh·∫≠t tr·ª±c ti·∫øp n·ªôi dung ƒë·ªÉ s·ªë kh√¥ng b·ªã ƒë·ª©ng ·ªü m·ª©c 0.
                if (window.scrollY > memberElement.offsetTop - window.innerHeight) {
                    memberElement.innerText = total;
                }
            }
        } else {
            console.error("Kh√¥ng t√¨m th·∫•y t√†i li·ªáu: metadata/users_stats");
        }
    } catch (e) {
        console.error("L·ªói khi truy xu·∫•t Firebase:", e);
    }
}

// G·ªçi h√†m ch·∫°y
fetchMemberStats();

    const userProfileBox = document.getElementById('user-profile-box');
    const loginBtn = document.getElementById('nav-login-btn');
    const registerLink = document.getElementById('nav-register');
    const displayUserName = document.getElementById('display-user-name');

    onAuthStateChanged(auth, async (user) => {
        if (user) {
            // Hi·ªán profile, ·∫©n n√∫t login/register
            userProfileBox.style.display = 'flex';
            if(loginBtn) loginBtn.style.display = 'none';
            if(registerLink) registerLink.style.display = 'none';

            try {
                const userDocSnap = await getDoc(doc(db, "users", user.uid));
                displayUserName.innerText = (userDocSnap.exists() && userDocSnap.data().fullName) 
                    ? userDocSnap.data().fullName 
                    : (user.displayName || user.email.split('@')[0]);
            } catch (e) {
                displayUserName.innerText = user.email.split('@')[0];
            }
        } else {
            // Ch∆∞a ƒëƒÉng nh·∫≠p: ·∫©n profile, hi·ªán n√∫t login/register
            userProfileBox.style.display = 'none';
            if(loginBtn) loginBtn.style.display = 'block';
            if(registerLink) registerLink.style.display = 'block';
        }
    });

    // S·ª± ki·ªán ƒëƒÉng xu·∫•t
    document.getElementById('auth-logout-btn').onclick = () => {
        signOut(auth).then(() => window.location.reload());
    };
</script>
</body>
</html>